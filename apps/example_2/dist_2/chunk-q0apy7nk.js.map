{
  "version": 3,
  "sources": ["../../runtime/src/validators.ts"],
  "sourcesContent": [
    "import type { ImageInput } from './types.js';\n\nexport function validateArrayBuffer(\n  buffer: unknown\n): asserts buffer is ArrayBuffer {\n  // Check if SharedArrayBuffer is defined in the current environment before using it\n  if (\n    typeof SharedArrayBuffer !== 'undefined' &&\n    buffer instanceof SharedArrayBuffer\n  ) {\n    throw new Error(\n      'SharedArrayBuffer is not supported. ' +\n        'Use regular ArrayBuffer or Uint8Array instead.'\n    );\n  }\n\n  if (!(buffer instanceof ArrayBuffer)) {\n    throw new TypeError('image.data.buffer must be an ArrayBuffer');\n  }\n}\n\nexport function validateImageInput(\n  image: unknown\n): asserts image is ImageInput {\n  if (!image || typeof image !== 'object') {\n    throw new TypeError('image must be an object');\n  }\n\n  const imageObj = image as Record<string, unknown>;\n\n  if (!('data' in imageObj)) {\n    throw new TypeError('image.data is required');\n  }\n\n  const { data } = imageObj;\n  if (!(data instanceof Uint8Array || data instanceof Uint8ClampedArray)) {\n    throw new TypeError('image.data must be Uint8Array or Uint8ClampedArray');\n  }\n\n  if (!('width' in imageObj) || !('height' in imageObj)) {\n    throw new TypeError('image.width and image.height are required');\n  }\n\n  const { width, height } = imageObj;\n\n  if (typeof width !== 'number' || !Number.isInteger(width) || width <= 0) {\n    throw new RangeError(\n      `image.width must be a positive integer, got ${width}`\n    );\n  }\n\n  if (typeof height !== 'number' || !Number.isInteger(height) || height <= 0) {\n    throw new RangeError(\n      `image.height must be a positive integer, got ${height}`\n    );\n  }\n\n  const expectedSize = width * height * 4;\n  if (data.length < expectedSize) {\n    throw new RangeError(\n      `image.data too small: ${data.length} bytes, expected at least ${expectedSize} bytes for ${width}x${height} RGBA image`\n    );\n  }\n}\n"
  ],
  "mappings": ";AAqBO,SAAS,CAAkB,CAChC,EAC6B,CAC7B,GAAI,CAAC,GAAS,OAAO,IAAU,SAC7B,MAAU,UAAU,yBAAyB,EAG/C,IAAM,EAAW,EAEjB,GAAI,EAAE,SAAU,GACd,MAAU,UAAU,wBAAwB,EAG9C,IAAQ,QAAS,EACjB,GAAI,EAAE,aAAgB,YAAc,aAAgB,mBAClD,MAAU,UAAU,oDAAoD,EAG1E,GAAI,EAAE,UAAW,IAAa,EAAE,WAAY,GAC1C,MAAU,UAAU,2CAA2C,EAGjE,IAAQ,QAAO,UAAW,EAE1B,GAAI,OAAO,IAAU,UAAY,CAAC,OAAO,UAAU,CAAK,GAAK,GAAS,EACpE,MAAU,WACR,+CAA+C,GACjD,EAGF,GAAI,OAAO,IAAW,UAAY,CAAC,OAAO,UAAU,CAAM,GAAK,GAAU,EACvE,MAAU,WACR,gDAAgD,GAClD,EAGF,IAAM,EAAe,EAAQ,EAAS,EACtC,GAAI,EAAK,OAAS,EAChB,MAAU,WACR,yBAAyB,EAAK,mCAAmC,eAA0B,KAAS,cACtG",
  "debugId": "7AE3A24486B7640E64756E2164756E21",
  "names": []
}