var U0={};L0(U0,{avifEncodeClient:()=>X0,avifDecodeClient:()=>K0});module.exports=H0(U0);async function aZ(R){try{if(typeof process<"u"&&process.versions?.node){let I=await import("fs/promises"),k=/^(file:|https?:)/.test(R)?new URL(R):new URL(R,"file:///home/bnowak/repos/squoosh-kit/packages/runtime/src/wasm-loader.ts"),b=k.protocol==="file:"?(await import("url")).fileURLToPath(k):k.pathname,x=await I.readFile(b);return x.buffer.slice(x.byteOffset,x.byteOffset+x.byteLength)}}catch(I){}try{let I=/^(file:|https?:)/.test(R)?new URL(R):new URL(R,"file:///home/bnowak/repos/squoosh-kit/packages/runtime/src/wasm-loader.ts"),$=await fetch(I);if(!$.ok)throw Error(`Failed to fetch WASM binary: ${$.status} ${$.statusText}`);return await $.arrayBuffer()}catch(I){throw Error(`Failed to load WASM binary from "${R}": ${I instanceof Error?I.message:String(I)}`)}}var O0=function(){var R="file:///home/bnowak/repos/squoosh-kit/packages/avif/wasm/avif/avif_enc.js";return function($){$=$||{};var $=typeof $<"u"?$:{},k,b;$.ready=new Promise(function(J,Z){k=J,b=Z});var x={},T;for(T in $)if($.hasOwnProperty(T))x[T]=$[T];var RJ=[],jQ="./this.program",cJ=function(J,Z){throw Z},EJ=!1,OJ=!0,v="";function MQ(J){if($.locateFile)return $.locateFile(J,v);return v+J}var xQ,fQ,IJ,TQ;if(EJ||OJ){if(OJ)v=self.location.href;else if(typeof document<"u"&&document.currentScript)v=document.currentScript.src;if(R)v=R;if(v.indexOf("blob:")!==0)v=v.substr(0,v.replace(/[?#].*/,"").lastIndexOf("/")+1);else v="";{if(xQ=function(J){var Z=new XMLHttpRequest;return Z.open("GET",J,!1),Z.send(null),Z.responseText},OJ)IJ=function(J){var Z=new XMLHttpRequest;return Z.open("GET",J,!1),Z.responseType="arraybuffer",Z.send(null),new Uint8Array(Z.response)};fQ=function(J,Z,K){var G=new XMLHttpRequest;G.open("GET",J,!0),G.responseType="arraybuffer",G.onload=function(){if(G.status==200||G.status==0&&G.response){Z(G.response);return}K()},G.onerror=K,G.send(null)}}TQ=function(J){document.title=J}}var vQ=$.print||console.log.bind(console),t=$.printErr||console.warn.bind(console);for(T in x)if(x.hasOwnProperty(T))$[T]=x[T];if(x=null,$.arguments)RJ=$.arguments;if($.thisProgram)jQ=$.thisProgram;if($.quit)cJ=$.quit;var pJ=0,hQ=function(J){pJ=J},yQ=function(){return pJ},JJ;if($.wasmBinary)JJ=$.wasmBinary;var Y0=$.noExitRuntime||!0;if(typeof WebAssembly!=="object")GJ("no native wasm support detected");var jJ,mJ=!1,gQ,lJ=new TextDecoder("utf8");function cQ(J,Z,K){var G=Z+K,q=Z;while(J[q]&&!(q>=G))++q;return lJ.decode(J.subarray?J.subarray(Z,q):new Uint8Array(J.slice(Z,q)))}function dJ(J,Z){if(!J)return"";var K=J+Z;for(var G=J;!(G>=K)&&B[G];)++G;return lJ.decode(B.subarray(J,G))}function pQ(J,Z,K,G){if(!(G>0))return 0;var q=K,H=K+G-1;for(var L=0;L<J.length;++L){var O=J.charCodeAt(L);if(O>=55296&&O<=57343){var W=J.charCodeAt(++L);O=65536+((O&1023)<<10)|W&1023}if(O<=127){if(K>=H)break;Z[K++]=O}else if(O<=2047){if(K+1>=H)break;Z[K++]=192|O>>6,Z[K++]=128|O&63}else if(O<=65535){if(K+2>=H)break;Z[K++]=224|O>>12,Z[K++]=128|O>>6&63,Z[K++]=128|O&63}else{if(K+3>=H)break;Z[K++]=240|O>>18,Z[K++]=128|O>>12&63,Z[K++]=128|O>>6&63,Z[K++]=128|O&63}}return Z[K]=0,K-q}function mQ(J,Z,K){return pQ(J,B,Z,K)}function lQ(J){var Z=0;for(var K=0;K<J.length;++K){var G=J.charCodeAt(K);if(G>=55296&&G<=57343)G=65536+((G&1023)<<10)|J.charCodeAt(++K)&1023;if(G<=127)++Z;else if(G<=2047)Z+=2;else if(G<=65535)Z+=3;else Z+=4}return Z}var dQ=new TextDecoder("utf-16le");function uQ(J,Z){var K=J,G=K>>1,q=G+Z/2;while(!(G>=q)&&HJ[G])++G;return K=G<<1,dQ.decode(B.subarray(J,K));var H="";for(var L=0;!(L>=Z/2);++L){var O=a[J+L*2>>1];if(O==0)break;H+=String.fromCharCode(O)}return H}function sQ(J,Z,K){if(K===void 0)K=2147483647;if(K<2)return 0;K-=2;var G=Z,q=K<J.length*2?K/2:J.length;for(var H=0;H<q;++H){var L=J.charCodeAt(H);a[Z>>1]=L,Z+=2}return a[Z>>1]=0,Z-G}function oQ(J){return J.length*2}function iQ(J,Z){var K=0,G="";while(!(K>=Z/4)){var q=w[J+K*4>>2];if(q==0)break;if(++K,q>=65536){var H=q-65536;G+=String.fromCharCode(55296|H>>10,56320|H&1023)}else G+=String.fromCharCode(q)}return G}function nQ(J,Z,K){if(K===void 0)K=2147483647;if(K<4)return 0;var G=Z,q=G+K-4;for(var H=0;H<J.length;++H){var L=J.charCodeAt(H);if(L>=55296&&L<=57343){var O=J.charCodeAt(++H);L=65536+((L&1023)<<10)|O&1023}if(w[Z>>2]=L,Z+=4,Z+4>q)break}return w[Z>>2]=0,Z-G}function tQ(J){var Z=0;for(var K=0;K<J.length;++K){var G=J.charCodeAt(K);if(G>=55296&&G<=57343)++K;Z+=4}return Z}function aQ(J,Z){if(J%Z>0)J+=Z-J%Z;return J}var BJ,bJ,B,a,HJ,w,h,uJ,sJ;function oJ(J){BJ=J,$.HEAP8=bJ=new Int8Array(J),$.HEAP16=a=new Int16Array(J),$.HEAP32=w=new Int32Array(J),$.HEAPU8=B=new Uint8Array(J),$.HEAPU16=HJ=new Uint16Array(J),$.HEAPU32=h=new Uint32Array(J),$.HEAPF32=uJ=new Float32Array(J),$.HEAPF64=sJ=new Float64Array(J)}var G0=$.INITIAL_MEMORY||16777216,iJ,nJ=[],tJ=[],aJ=[],rQ=!1;function eQ(){if($.preRun){if(typeof $.preRun=="function")$.preRun=[$.preRun];while($.preRun.length)ZZ($.preRun.shift())}SJ(nJ)}function JZ(){rQ=!0,SJ(tJ)}function QZ(){if($.postRun){if(typeof $.postRun=="function")$.postRun=[$.postRun];while($.postRun.length)XZ($.postRun.shift())}SJ(aJ)}function ZZ(J){nJ.unshift(J)}function $Z(J){tJ.unshift(J)}function XZ(J){aJ.unshift(J)}var s=0,PJ=null,QJ=null;function KZ(J){if(s++,$.monitorRunDependencies)$.monitorRunDependencies(s)}function YZ(J){if(s--,$.monitorRunDependencies)$.monitorRunDependencies(s);if(s==0){if(PJ!==null)clearInterval(PJ),PJ=null;if(QJ){var Z=QJ;QJ=null,Z()}}}$.preloadedImages={},$.preloadedAudios={};function GJ(J){if($.onAbort)$.onAbort(J);J="Aborted("+J+")",t(J),mJ=!0,gQ=1,J+=". Build with -s ASSERTIONS=1 for more info.";var Z=new WebAssembly.RuntimeError(J);throw b(Z),Z}var GZ="data:application/octet-stream;base64,";function rJ(J){return J.startsWith(GZ)}var _;if($.locateFile){if(_="avif_enc.wasm",!rJ(_))_=MQ(_)}else _=new URL("avif_enc.wasm","file:///home/bnowak/repos/squoosh-kit/packages/avif/wasm/avif/avif_enc.js").toString();function eJ(J){try{if(J==_&&JJ)return new Uint8Array(JJ);if(IJ)return IJ(J);else throw"both async and sync fetching of the wasm failed"}catch(Z){GJ(Z)}}function VZ(){if(!JJ&&(EJ||OJ)){if(typeof fetch==="function")return fetch(_,{credentials:"same-origin"}).then(function(J){if(!J.ok)throw"failed to load wasm binary file at '"+_+"'";return J.arrayBuffer()}).catch(function(){return eJ(_)})}return Promise.resolve().then(function(){return eJ(_)})}function qZ(){var J={a:NJ};function Z(L,O){var W=L.exports;$.asm=W,jJ=$.asm.T,oJ(jJ.buffer),iJ=$.asm.aa,$Z($.asm.U),YZ("wasm-instantiate")}KZ("wasm-instantiate");function K(L){Z(L.instance)}function G(L){return VZ().then(function(O){return WebAssembly.instantiate(O,J)}).then(function(O){return O}).then(L,function(O){t("failed to asynchronously prepare wasm: "+O),GJ(O)})}function q(){if(!JJ&&typeof WebAssembly.instantiateStreaming==="function"&&!rJ(_)&&typeof fetch==="function")return fetch(_,{credentials:"same-origin"}).then(function(L){var O=WebAssembly.instantiateStreaming(L,J);return O.then(K,function(W){return t("wasm streaming compile failed: "+W),t("falling back to ArrayBuffer instantiation"),G(K)})});else return G(K)}if($.instantiateWasm)try{var H=$.instantiateWasm(J,Z);return H}catch(L){return t("Module.instantiateWasm callback failed with error: "+L),!1}return q().catch(b),{}}function SJ(J){while(J.length>0){var Z=J.shift();if(typeof Z=="function"){Z($);continue}var K=Z.func;if(typeof K==="number")if(Z.arg===void 0)S(K)();else S(K)(Z.arg);else K(Z.arg===void 0?null:Z.arg)}}var LJ=[];function S(J){var Z=LJ[J];if(!Z){if(J>=LJ.length)LJ.length=J+1;LJ[J]=Z=iJ.get(J)}return Z}var ZJ={mappings:{},buffers:[null,[],[]],printChar:function(J,Z){var K=ZJ.buffers[J];if(Z===0||Z===10)(J===1?vQ:t)(cQ(K,0)),K.length=0;else K.push(Z)},varargs:void 0,get:function(){ZJ.varargs+=4;var J=w[ZJ.varargs-4>>2];return J},getStr:function(J){var Z=dJ(J);return Z},get64:function(J,Z){return J}};function JQ(J,Z,K){return ZJ.varargs=K,0}function OZ(J,Z,K){return ZJ.varargs=K,0}function HQ(J,Z,K){ZJ.varargs=K}var g={};function WJ(J){while(J.length){var Z=J.pop(),K=J.pop();K(Z)}}function e(J){return this.fromWireType(h[J>>2])}var $J={},DJ={},fJ={},LQ=48,WQ=57;function TJ(J){if(J===void 0)return"_unknown";J=J.replace(/[^a-zA-Z0-9_]/g,"$");var Z=J.charCodeAt(0);if(Z>=LQ&&Z<=WQ)return"_"+J;else return J}function QQ(J,Z){return J=TJ(J),Function("body","return function "+J+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(Z)}function c(J,Z){var K=QQ(Z,function(G){this.name=Z,this.message=G;var q=Error(G).stack;if(q!==void 0)this.stack=this.toString()+`
`+q.replace(/^Error(:[^\n]*)?\n/,"")});return K.prototype=Object.create(J.prototype),K.prototype.constructor=K,K.prototype.toString=function(){if(this.message===void 0)return this.name;else return this.name+": "+this.message},K}var ZQ=void 0;function $Q(J){throw new ZQ(J)}function DQ(J,Z,K){J.forEach(function(O){fJ[O]=Z});function G(O){var W=K(O);if(W.length!==J.length)$Q("Mismatched type converter count");for(var E=0;E<J.length;++E)u(J[E],W[E])}var q=Array(Z.length),H=[],L=0;if(Z.forEach(function(O,W){if(DJ.hasOwnProperty(O))q[W]=DJ[O];else{if(H.push(O),!$J.hasOwnProperty(O))$J[O]=[];$J[O].push(function(){if(q[W]=DJ[O],++L,L===H.length)G(q)})}}),H.length===0)G(q)}function XJ(J){var Z=g[J];delete g[J];var{rawConstructor:K,rawDestructor:G,fields:q}=Z,H=q.map(function(L){return L.getterReturnType}).concat(q.map(function(L){return L.setterArgumentType}));DQ([J],H,function(L){var O={};return q.forEach(function(W,E){var F=W.fieldName,A=L[E],P=W.getter,y=W.getterContext,qJ=L[E+q.length],xJ=W.setter,kJ=W.setterContext;O[F]={read:function(OQ){return A.fromWireType(P(y,OQ))},write:function(OQ,q0){var eZ=[];xJ(kJ,OQ,qJ.toWireType(eZ,q0)),WJ(eZ)}}}),[{name:Z.name,fromWireType:function(W){var E={};for(var F in O)E[F]=O[F].read(W);return G(W),E},toWireType:function(W,E){for(var F in O)if(!(F in E))throw TypeError('Missing field:  "'+F+'"');var A=K();for(F in O)O[F].write(A,E[F]);if(W!==null)W.push(G,A);return A},argPackAdvance:8,readValueFromPointer:e,destructorFunction:G}]})}function jZ(J,Z,K,G,q){}function wJ(J){switch(J){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw TypeError("Unknown type size: "+J)}}function r(){var J=Array(256);for(var Z=0;Z<256;++Z)J[Z]=String.fromCharCode(Z);XQ=J}var XQ=void 0;function d(J){var Z="",K=J;while(B[K])Z+=XQ[B[K++]];return Z}var UQ=void 0;function o(J){throw new UQ(J)}function u(J,Z,K){if(K=K||{},!("argPackAdvance"in Z))throw TypeError("registerType registeredInstance requires argPackAdvance");var G=Z.name;if(!J)o('type "'+G+'" must have a positive integer typeid pointer');if(DJ.hasOwnProperty(J))if(K.ignoreDuplicateRegistrations)return;else o("Cannot register type '"+G+"' twice");if(DJ[J]=Z,delete fJ[J],$J.hasOwnProperty(J)){var q=$J[J];delete $J[J],q.forEach(function(H){H()})}}function KQ(J,Z,K,G,q){var H=wJ(K);Z=d(Z),u(J,{name:Z,fromWireType:function(L){return!!L},toWireType:function(L,O){return O?G:q},argPackAdvance:8,readValueFromPointer:function(L){var O;if(K===1)O=bJ;else if(K===2)O=a;else if(K===4)O=w;else throw TypeError("Unknown boolean type size: "+Z);return this.fromWireType(O[L>>H])},destructorFunction:null})}var YQ=[],i=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function NQ(J){if(J>4&&--i[J].refcount===0)i[J]=void 0,YQ.push(J)}function HZ(){var J=0;for(var Z=5;Z<i.length;++Z)if(i[Z]!==void 0)++J;return J}function LZ(){for(var J=5;J<i.length;++J)if(i[J]!==void 0)return i[J];return null}function WZ(){$.count_emval_handles=HZ,$.get_first_emval=LZ}var FJ={toValue:function(J){if(!J)o("Cannot use deleted val. handle = "+J);return i[J].value},toHandle:function(J){switch(J){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var Z=YQ.length?YQ.pop():i.length;return i[Z]={refcount:1,value:J},Z}}}};function DZ(J,Z){Z=d(Z),u(J,{name:Z,fromWireType:function(K){var G=FJ.toValue(K);return NQ(K),G},toWireType:function(K,G){return FJ.toHandle(G)},argPackAdvance:8,readValueFromPointer:e,destructorFunction:null})}function GQ(J){if(J===null)return"null";var Z=typeof J;if(Z==="object"||Z==="array"||Z==="function")return J.toString();else return""+J}function UZ(J,Z){switch(Z){case 2:return function(K){return this.fromWireType(uJ[K>>2])};case 3:return function(K){return this.fromWireType(sJ[K>>3])};default:throw TypeError("Unknown float type: "+J)}}function NZ(J,Z,K){var G=wJ(K);Z=d(Z),u(J,{name:Z,fromWireType:function(q){return q},toWireType:function(q,H){if(typeof H!=="number"&&typeof H!=="boolean")throw TypeError('Cannot convert "'+GQ(H)+'" to '+this.name);return H},argPackAdvance:8,readValueFromPointer:UZ(Z,G),destructorFunction:null})}function zZ(J,Z){if(!(J instanceof Function))throw TypeError("new_ called with constructor type "+typeof J+" which is not a function");var K=QQ(J.name||"unknownFunctionName",function(){});K.prototype=J.prototype;var G=new K,q=J.apply(G,Z);return q instanceof Object?q:G}function EZ(J,Z,K,G,q){var H=Z.length;if(H<2)o("argTypes array size mismatch! Must at least get return value and 'this' types!");var L=Z[1]!==null&&K!==null,O=!1;for(var W=1;W<Z.length;++W)if(Z[W]!==null&&Z[W].destructorFunction===void 0){O=!0;break}var E=Z[0].name!=="void",F="",A="";for(var W=0;W<H-2;++W)F+=(W!==0?", ":"")+"arg"+W,A+=(W!==0?", ":"")+"arg"+W+"Wired";var P="return function "+TJ(J)+"("+F+`) {
if (arguments.length !== `+(H-2)+`) {
throwBindingError('function `+J+" called with ' + arguments.length + ' arguments, expected "+(H-2)+` args!');
}
`;if(O)P+=`var destructors = [];
`;var y=O?"destructors":"null",qJ=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],xJ=[o,G,q,WJ,Z[0],Z[1]];if(L)P+="var thisWired = classParam.toWireType("+y+`, this);
`;for(var W=0;W<H-2;++W)P+="var arg"+W+"Wired = argType"+W+".toWireType("+y+", arg"+W+"); // "+Z[W+2].name+`
`,qJ.push("argType"+W),xJ.push(Z[W+2]);if(L)A="thisWired"+(A.length>0?", ":"")+A;if(P+=(E?"var rv = ":"")+"invoker(fn"+(A.length>0?", ":"")+A+`);
`,O)P+=`runDestructors(destructors);
`;else for(var W=L?1:2;W<Z.length;++W){var kJ=W===1?"thisWired":"arg"+(W-2)+"Wired";if(Z[W].destructorFunction!==null)P+=kJ+"_dtor("+kJ+"); // "+Z[W].name+`
`,qJ.push(kJ+"_dtor"),xJ.push(Z[W].destructorFunction)}if(E)P+=`var ret = retType.fromWireType(rv);
return ret;
`;P+=`}
`,qJ.push(P);var OQ=zZ(Function,qJ).apply(null,xJ);return OQ}function FZ(J,Z,K){if(J[Z].overloadTable===void 0){var G=J[Z];J[Z]=function(){if(!J[Z].overloadTable.hasOwnProperty(arguments.length))o("Function '"+K+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+J[Z].overloadTable+")!");return J[Z].overloadTable[arguments.length].apply(this,arguments)},J[Z].overloadTable=[],J[Z].overloadTable[G.argCount]=G}}function CZ(J,Z,K){if($.hasOwnProperty(J)){if(K===void 0||$[J].overloadTable!==void 0&&$[J].overloadTable[K]!==void 0)o("Cannot register public name '"+J+"' twice");if(FZ($,J,J),$.hasOwnProperty(K))o("Cannot register multiple overloads of a function with the same number of arguments ("+K+")!");$[J].overloadTable[K]=Z}else if($[J]=Z,K!==void 0)$[J].numArguments=K}function zQ(J,Z){var K=[];for(var G=0;G<J;G++)K.push(w[(Z>>2)+G]);return K}function EQ(J,Z,K){if(!$.hasOwnProperty(J))$Q("Replacing nonexistant public symbol");if($[J].overloadTable!==void 0&&K!==void 0)$[J].overloadTable[K]=Z;else $[J]=Z,$[J].argCount=K}function AZ(J,Z,K){var G=$["dynCall_"+J];return K&&K.length?G.apply(null,[Z].concat(K)):G.call(null,Z)}function kZ(J,Z,K){if(J.includes("j"))return AZ(J,Z,K);return S(Z).apply(null,K)}function RZ(J,Z){var K=[];return function(){K.length=arguments.length;for(var G=0;G<arguments.length;G++)K[G]=arguments[G];return kZ(J,Z,K)}}function _J(J,Z){J=d(J);function K(){if(J.includes("j"))return RZ(J,Z);return S(Z)}var G=K();if(typeof G!=="function")o("unknown function pointer with signature "+J+": "+Z);return G}var FQ=void 0;function CQ(J){var Z=bQ(J),K=d(Z);return YJ(Z),K}function IZ(J,Z){var K=[],G={};function q(H){if(G[H])return;if(DJ[H])return;if(fJ[H]){fJ[H].forEach(q);return}K.push(H),G[H]=!0}throw Z.forEach(q),new FQ(J+": "+K.map(CQ).join([", "]))}function BZ(J,Z,K,G,q,H){var L=zQ(Z,K);J=d(J),q=_J(G,q),CZ(J,function(){IZ("Cannot call "+J+" due to unbound types",L)},Z-1),DQ([],L,function(O){var W=[O[0],null].concat(O.slice(1));return EQ(J,EZ(J,W,null,q,H),Z-1),[]})}function bZ(J,Z,K){switch(Z){case 0:return K?function(q){return bJ[q]}:function(q){return B[q]};case 1:return K?function(q){return a[q>>1]}:function(q){return HJ[q>>1]};case 2:return K?function(q){return w[q>>2]}:function(q){return h[q>>2]};default:throw TypeError("Unknown integer type: "+J)}}function PZ(J,Z,K,G,q){if(Z=d(Z),q===-1)q=4294967295;var H=wJ(K),L=function(E){return E};if(G===0){var O=32-8*K;L=function(E){return E<<O>>>O}}var W=Z.includes("unsigned");u(J,{name:Z,fromWireType:L,toWireType:function(E,F){if(typeof F!=="number"&&typeof F!=="boolean")throw TypeError('Cannot convert "'+GQ(F)+'" to '+this.name);if(F<G||F>q)throw TypeError('Passing a number "'+GQ(F)+'" from JS side to C/C++ side to an argument of type "'+Z+'", which is outside the valid range ['+G+", "+q+"]!");return W?F>>>0:F|0},argPackAdvance:8,readValueFromPointer:bZ(Z,H,G!==0),destructorFunction:null})}function SZ(J,Z,K){var G=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],q=G[Z];function H(L){L=L>>2;var O=h,W=O[L],E=O[L+1];return new q(BJ,E,W)}K=d(K),u(J,{name:K,fromWireType:H,argPackAdvance:8,readValueFromPointer:H},{ignoreDuplicateRegistrations:!0})}function AQ(J,Z){Z=d(Z);var K=Z==="std::string";u(J,{name:Z,fromWireType:function(G){var q=h[G>>2],H;if(K){var L=G+4;for(var O=0;O<=q;++O){var W=G+4+O;if(O==q||B[W]==0){var E=W-L,F=dJ(L,E);if(H===void 0)H=F;else H+=String.fromCharCode(0),H+=F;L=W+1}}}else{var A=Array(q);for(var O=0;O<q;++O)A[O]=String.fromCharCode(B[G+4+O]);H=A.join("")}return YJ(G),H},toWireType:function(G,q){if(q instanceof ArrayBuffer)q=new Uint8Array(q);var H,L=typeof q==="string";if(!(L||q instanceof Uint8Array||q instanceof Uint8ClampedArray||q instanceof Int8Array))o("Cannot pass non-string to std::string");if(K&&L)H=function(){return lQ(q)};else H=function(){return q.length};var O=H(),W=qQ(4+O+1);if(h[W>>2]=O,K&&L)mQ(q,W+4,O+1);else if(L)for(var E=0;E<O;++E){var F=q.charCodeAt(E);if(F>255)YJ(W),o("String has UTF-16 code units that do not fit in 8 bits");B[W+4+E]=F}else for(var E=0;E<O;++E)B[W+4+E]=q[E];if(G!==null)G.push(YJ,W);return W},argPackAdvance:8,readValueFromPointer:e,destructorFunction:function(G){YJ(G)}})}function wZ(J,Z,K){K=d(K);var G,q,H,L,O;if(Z===2)G=uQ,q=sQ,L=oQ,H=function(){return HJ},O=1;else if(Z===4)G=iQ,q=nQ,L=tQ,H=function(){return h},O=2;u(J,{name:K,fromWireType:function(W){var E=h[W>>2],F=H(),A,P=W+4;for(var y=0;y<=E;++y){var qJ=W+4+y*Z;if(y==E||F[qJ>>O]==0){var xJ=qJ-P,kJ=G(P,xJ);if(A===void 0)A=kJ;else A+=String.fromCharCode(0),A+=kJ;P=qJ+Z}}return YJ(W),A},toWireType:function(W,E){if(typeof E!=="string")o("Cannot pass non-string to C++ string type "+K);var F=L(E),A=qQ(4+F+Z);if(h[A>>2]=F>>O,q(E,A+4,F+Z),W!==null)W.push(YJ,A);return A},argPackAdvance:8,readValueFromPointer:e,destructorFunction:function(W){YJ(W)}})}function _Z(J,Z,K,G,q,H){g[J]={name:d(Z),rawConstructor:_J(K,G),rawDestructor:_J(q,H),fields:[]}}function MZ(J,Z,K,G,q,H,L,O,W,E){g[J].fields.push({fieldName:d(Z),getterReturnType:K,getter:_J(G,q),getterContext:H,setterArgumentType:L,setter:_J(O,W),setterContext:E})}function xZ(J,Z){Z=d(Z),u(J,{isVoid:!0,name:Z,argPackAdvance:0,fromWireType:function(){return},toWireType:function(K,G){return}})}function kQ(){throw"longjmp"}var fZ={};function TZ(J){var Z=fZ[J];if(Z===void 0)return d(J);else return Z}function RQ(){if(typeof globalThis==="object")return globalThis;return function(){return Function}()("return this")()}function vZ(J){if(J===0)return FJ.toHandle(RQ());else return J=TZ(J),FJ.toHandle(RQ()[J])}function hZ(J){if(J>4)i[J].refcount+=1}function vJ(J,Z){var K=DJ[J];if(K===void 0)o(Z+" has unknown type "+CQ(J));return K}function yZ(J){var Z="";for(var K=0;K<J;++K)Z+=(K!==0?", ":"")+"arg"+K;var G="return function emval_allocator_"+J+`(constructor, argTypes, args) {
`;for(var K=0;K<J;++K)G+="var argType"+K+" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + "+K+'], "parameter '+K+`");
var arg`+K+" = argType"+K+`.readValueFromPointer(args);
args += argType`+K+`['argPackAdvance'];
`;return G+="var obj = new constructor("+Z+`);
return valueToHandle(obj);
}
`,Function("requireRegisteredType","Module","valueToHandle",G)(vJ,$,FJ.toHandle)}var IQ={};function gZ(J,Z,K,G){J=FJ.toValue(J);var q=IQ[Z];if(!q)q=yZ(Z),IQ[Z]=q;return q(J,K,G)}function cZ(){GJ("")}function pZ(J,Z,K){B.copyWithin(J,Z,Z+K)}function mZ(J){try{return jJ.grow(J-BJ.byteLength+65535>>>16),oJ(jJ.buffer),1}catch(Z){}}function lZ(J){var Z=B.length;J=J>>>0;var K=2147483648;if(J>K)return!1;for(var G=1;G<=4;G*=2){var q=Z*(1+0.2/G);q=Math.min(q,J+100663296);var H=Math.min(K,aQ(Math.max(J,q),65536)),L=mZ(H);if(L)return!0}return!1}function rZ(J){return 0}function dZ(J,Z,K,G){var q=ZJ.getStreamFromFD(J),H=ZJ.doReadv(q,Z,K);return w[G>>2]=H,0}function VQ(J,Z,K,G,q){}function KJ(J,Z,K,G){var q=0;for(var H=0;H<K;H++){var L=w[Z>>2],O=w[Z+4>>2];Z+=8;for(var W=0;W<O;W++)ZJ.printChar(J,B[L+W]);q+=O}return w[G>>2]=q,0}function BQ(){return yQ()}function uZ(J){hQ(J)}function UJ(J){var Z=Date.now()/1000|0;if(J)w[J>>2]=Z;return Z}ZQ=$.InternalError=c(Error,"InternalError"),r(),UQ=$.BindingError=c(Error,"BindingError"),WZ(),FQ=$.UnboundTypeError=c(Error,"UnboundTypeError");var NJ={s:JQ,M:OZ,O:HQ,D:XJ,B:jZ,Q:KQ,P:DZ,u:NZ,y:BZ,i:PZ,g:SZ,v:AQ,o:wZ,H:_Z,f:MZ,R:xZ,I:kQ,j:NQ,S:vZ,x:hZ,N:gZ,d:cZ,J:pZ,n:lZ,t:rZ,K:dZ,A:VQ,L:KJ,b:BQ,h:f,k:C,G:M,E:zJ,F:n,z:V0,l:D,e:U,r:z,c:N,C:iZ,p:AJ,m:VJ,q:MJ,a:uZ,w:UJ},CJ=qZ(),sZ=$.___wasm_call_ctors=function(){return(sZ=$.___wasm_call_ctors=$.asm.U).apply(null,arguments)},qQ=$._malloc=function(){return(qQ=$._malloc=$.asm.V).apply(null,arguments)},YJ=$._free=function(){return(YJ=$._free=$.asm.W).apply(null,arguments)},bQ=$.___getTypeName=function(){return(bQ=$.___getTypeName=$.asm.X).apply(null,arguments)},oZ=$.___embind_register_native_and_builtin_types=function(){return(oZ=$.___embind_register_native_and_builtin_types=$.asm.Y).apply(null,arguments)},p=$.stackSave=function(){return(p=$.stackSave=$.asm.Z).apply(null,arguments)},m=$.stackRestore=function(){return(m=$.stackRestore=$.asm._).apply(null,arguments)},l=$._setThrew=function(){return(l=$._setThrew=$.asm.$).apply(null,arguments)},hJ=$.dynCall_jiiiiiiiii=function(){return(hJ=$.dynCall_jiiiiiiiii=$.asm.ba).apply(null,arguments)},yJ=$.dynCall_ijiii=function(){return(yJ=$.dynCall_ijiii=$.asm.ca).apply(null,arguments)},Q=$.dynCall_jiji=function(){return(Q=$.dynCall_jiji=$.asm.da).apply(null,arguments)},X=$.dynCall_jiiiiiiii=function(){return(X=$.dynCall_jiiiiiiii=$.asm.ea).apply(null,arguments)},Y=$.dynCall_jiiiiii=function(){return(Y=$.dynCall_jiiiiii=$.asm.fa).apply(null,arguments)},V=$.dynCall_jiiiii=function(){return(V=$.dynCall_jiiiii=$.asm.ga).apply(null,arguments)},j=$.dynCall_iiijii=function(){return(j=$.dynCall_iiijii=$.asm.ha).apply(null,arguments)};function U(J,Z,K){var G=p();try{S(J)(Z,K)}catch(q){if(m(G),q!==q+0&&q!=="longjmp")throw q;l(1,0)}}function N(J,Z,K,G,q){var H=p();try{S(J)(Z,K,G,q)}catch(L){if(m(H),L!==L+0&&L!=="longjmp")throw L;l(1,0)}}function D(J,Z){var K=p();try{S(J)(Z)}catch(G){if(m(K),G!==G+0&&G!=="longjmp")throw G;l(1,0)}}function z(J,Z,K,G){var q=p();try{S(J)(Z,K,G)}catch(H){if(m(q),H!==H+0&&H!=="longjmp")throw H;l(1,0)}}function C(J,Z,K,G,q){var H=p();try{return S(J)(Z,K,G,q)}catch(L){if(m(H),L!==L+0&&L!=="longjmp")throw L;l(1,0)}}function M(J,Z,K,G,q,H,L,O,W,E){var F=p();try{return S(J)(Z,K,G,q,H,L,O,W,E)}catch(A){if(m(F),A!==A+0&&A!=="longjmp")throw A;l(1,0)}}function f(J,Z,K){var G=p();try{return S(J)(Z,K)}catch(q){if(m(G),q!==q+0&&q!=="longjmp")throw q;l(1,0)}}function n(J,Z,K,G,q,H,L,O,W,E,F,A){var P=p();try{return S(J)(Z,K,G,q,H,L,O,W,E,F,A)}catch(y){if(m(P),y!==y+0&&y!=="longjmp")throw y;l(1,0)}}function zJ(J,Z,K,G,q,H,L,O,W,E,F){var A=p();try{return S(J)(Z,K,G,q,H,L,O,W,E,F)}catch(P){if(m(A),P!==P+0&&P!=="longjmp")throw P;l(1,0)}}function VJ(J,Z,K,G,q,H,L,O,W,E,F){var A=p();try{S(J)(Z,K,G,q,H,L,O,W,E,F)}catch(P){if(m(A),P!==P+0&&P!=="longjmp")throw P;l(1,0)}}function MJ(J,Z,K,G,q,H,L,O,W,E,F,A){var P=p();try{S(J)(Z,K,G,q,H,L,O,W,E,F,A)}catch(y){if(m(P),y!==y+0&&y!=="longjmp")throw y;l(1,0)}}function AJ(J,Z,K,G,q,H,L){var O=p();try{S(J)(Z,K,G,q,H,L)}catch(W){if(m(O),W!==W+0&&W!=="longjmp")throw W;l(1,0)}}function iZ(J,Z,K,G,q,H){var L=p();try{S(J)(Z,K,G,q,H)}catch(O){if(m(L),O!==O+0&&O!=="longjmp")throw O;l(1,0)}}function V0(J,Z,K,G,q,H){var L=p();try{return yJ(J,Z,K,G,q,H)}catch(O){if(m(L),O!==O+0&&O!=="longjmp")throw O;l(1,0)}}var PQ;QJ=function J(){if(!PQ)nZ();if(!PQ)QJ=J};function nZ(J){if(J=J||RJ,s>0)return;if(eQ(),s>0)return;function Z(){if(PQ)return;if(PQ=!0,$.calledRun=!0,mJ)return;if(JZ(),k($),$.onRuntimeInitialized)$.onRuntimeInitialized();QZ()}if($.setStatus)$.setStatus("Running..."),setTimeout(function(){setTimeout(function(){$.setStatus("")},1),Z()},1);else Z()}if($.run=nZ,$.preInit){if(typeof $.preInit=="function")$.preInit=[$.preInit];while($.preInit.length>0)$.preInit.pop()()}return nZ(),$.ready}}(),J0=O0;var j0=function(){var R="file:///home/bnowak/repos/squoosh-kit/packages/avif/wasm/avif-dec/avif_dec.js";return function($){$=$||{};var $=typeof $<"u"?$:{},k,b;$.ready=new Promise(function(Q,X){k=Q,b=X});var x={},T;for(T in $)if($.hasOwnProperty(T))x[T]=$[T];var RJ=[],jQ="./this.program",cJ=function(Q,X){throw X},EJ=!1,OJ=!0,v="";function MQ(Q){if($.locateFile)return $.locateFile(Q,v);return v+Q}var xQ,fQ,IJ,TQ;if(EJ||OJ){if(OJ)v=self.location.href;else if(typeof document<"u"&&document.currentScript)v=document.currentScript.src;if(R)v=R;if(v.indexOf("blob:")!==0)v=v.substr(0,v.replace(/[?#].*/,"").lastIndexOf("/")+1);else v="";{if(xQ=function(Q){var X=new XMLHttpRequest;return X.open("GET",Q,!1),X.send(null),X.responseText},OJ)IJ=function(Q){var X=new XMLHttpRequest;return X.open("GET",Q,!1),X.responseType="arraybuffer",X.send(null),new Uint8Array(X.response)};fQ=function(Q,X,Y){var V=new XMLHttpRequest;V.open("GET",Q,!0),V.responseType="arraybuffer",V.onload=function(){if(V.status==200||V.status==0&&V.response){X(V.response);return}Y()},V.onerror=Y,V.send(null)}}TQ=function(Q){document.title=Q}}var vQ=$.print||console.log.bind(console),t=$.printErr||console.warn.bind(console);for(T in x)if(x.hasOwnProperty(T))$[T]=x[T];if(x=null,$.arguments)RJ=$.arguments;if($.thisProgram)jQ=$.thisProgram;if($.quit)cJ=$.quit;var pJ=0,hQ=function(Q){pJ=Q},yQ=function(){return pJ},JJ;if($.wasmBinary)JJ=$.wasmBinary;var Y0=$.noExitRuntime||!0;if(typeof WebAssembly!=="object")GJ("no native wasm support detected");var jJ,mJ=!1,gQ,lJ=new TextDecoder("utf8");function cQ(Q,X,Y){var V=X+Y,j=X;while(Q[j]&&!(j>=V))++j;return lJ.decode(Q.subarray?Q.subarray(X,j):new Uint8Array(Q.slice(X,j)))}function dJ(Q,X){if(!Q)return"";var Y=Q+X;for(var V=Q;!(V>=Y)&&B[V];)++V;return lJ.decode(B.subarray(Q,V))}function pQ(Q,X,Y,V){if(!(V>0))return 0;var j=Y,U=Y+V-1;for(var N=0;N<Q.length;++N){var D=Q.charCodeAt(N);if(D>=55296&&D<=57343){var z=Q.charCodeAt(++N);D=65536+((D&1023)<<10)|z&1023}if(D<=127){if(Y>=U)break;X[Y++]=D}else if(D<=2047){if(Y+1>=U)break;X[Y++]=192|D>>6,X[Y++]=128|D&63}else if(D<=65535){if(Y+2>=U)break;X[Y++]=224|D>>12,X[Y++]=128|D>>6&63,X[Y++]=128|D&63}else{if(Y+3>=U)break;X[Y++]=240|D>>18,X[Y++]=128|D>>12&63,X[Y++]=128|D>>6&63,X[Y++]=128|D&63}}return X[Y]=0,Y-j}function mQ(Q,X,Y){return pQ(Q,B,X,Y)}function lQ(Q){var X=0;for(var Y=0;Y<Q.length;++Y){var V=Q.charCodeAt(Y);if(V>=55296&&V<=57343)V=65536+((V&1023)<<10)|Q.charCodeAt(++Y)&1023;if(V<=127)++X;else if(V<=2047)X+=2;else if(V<=65535)X+=3;else X+=4}return X}var dQ=new TextDecoder("utf-16le");function uQ(Q,X){var Y=Q,V=Y>>1,j=V+X/2;while(!(V>=j)&&HJ[V])++V;return Y=V<<1,dQ.decode(B.subarray(Q,Y));var U="";for(var N=0;!(N>=X/2);++N){var D=a[Q+N*2>>1];if(D==0)break;U+=String.fromCharCode(D)}return U}function sQ(Q,X,Y){if(Y===void 0)Y=2147483647;if(Y<2)return 0;Y-=2;var V=X,j=Y<Q.length*2?Y/2:Q.length;for(var U=0;U<j;++U){var N=Q.charCodeAt(U);a[X>>1]=N,X+=2}return a[X>>1]=0,X-V}function oQ(Q){return Q.length*2}function iQ(Q,X){var Y=0,V="";while(!(Y>=X/4)){var j=w[Q+Y*4>>2];if(j==0)break;if(++Y,j>=65536){var U=j-65536;V+=String.fromCharCode(55296|U>>10,56320|U&1023)}else V+=String.fromCharCode(j)}return V}function nQ(Q,X,Y){if(Y===void 0)Y=2147483647;if(Y<4)return 0;var V=X,j=V+Y-4;for(var U=0;U<Q.length;++U){var N=Q.charCodeAt(U);if(N>=55296&&N<=57343){var D=Q.charCodeAt(++U);N=65536+((N&1023)<<10)|D&1023}if(w[X>>2]=N,X+=4,X+4>j)break}return w[X>>2]=0,X-V}function tQ(Q){var X=0;for(var Y=0;Y<Q.length;++Y){var V=Q.charCodeAt(Y);if(V>=55296&&V<=57343)++Y;X+=4}return X}function aQ(Q,X){if(Q%X>0)Q+=X-Q%X;return Q}var BJ,bJ,B,a,HJ,w,h,uJ,sJ;function oJ(Q){BJ=Q,$.HEAP8=bJ=new Int8Array(Q),$.HEAP16=a=new Int16Array(Q),$.HEAP32=w=new Int32Array(Q),$.HEAPU8=B=new Uint8Array(Q),$.HEAPU16=HJ=new Uint16Array(Q),$.HEAPU32=h=new Uint32Array(Q),$.HEAPF32=uJ=new Float32Array(Q),$.HEAPF64=sJ=new Float64Array(Q)}var G0=$.INITIAL_MEMORY||16777216,iJ,nJ=[],tJ=[],aJ=[],rQ=!1;function eQ(){if($.preRun){if(typeof $.preRun=="function")$.preRun=[$.preRun];while($.preRun.length)ZZ($.preRun.shift())}SJ(nJ)}function JZ(){rQ=!0,SJ(tJ)}function QZ(){if($.postRun){if(typeof $.postRun=="function")$.postRun=[$.postRun];while($.postRun.length)XZ($.postRun.shift())}SJ(aJ)}function ZZ(Q){nJ.unshift(Q)}function $Z(Q){tJ.unshift(Q)}function XZ(Q){aJ.unshift(Q)}var s=0,PJ=null,QJ=null;function KZ(Q){if(s++,$.monitorRunDependencies)$.monitorRunDependencies(s)}function YZ(Q){if(s--,$.monitorRunDependencies)$.monitorRunDependencies(s);if(s==0){if(PJ!==null)clearInterval(PJ),PJ=null;if(QJ){var X=QJ;QJ=null,X()}}}$.preloadedImages={},$.preloadedAudios={};function GJ(Q){if($.onAbort)$.onAbort(Q);Q="Aborted("+Q+")",t(Q),mJ=!0,gQ=1,Q+=". Build with -s ASSERTIONS=1 for more info.";var X=new WebAssembly.RuntimeError(Q);throw b(X),X}var GZ="data:application/octet-stream;base64,";function rJ(Q){return Q.startsWith(GZ)}var _;if($.locateFile){if(_="avif_dec.wasm",!rJ(_))_=MQ(_)}else _=new URL("avif_dec.wasm","file:///home/bnowak/repos/squoosh-kit/packages/avif/wasm/avif-dec/avif_dec.js").toString();function eJ(Q){try{if(Q==_&&JJ)return new Uint8Array(JJ);if(IJ)return IJ(Q);else throw"both async and sync fetching of the wasm failed"}catch(X){GJ(X)}}function VZ(){if(!JJ&&(EJ||OJ)){if(typeof fetch==="function")return fetch(_,{credentials:"same-origin"}).then(function(Q){if(!Q.ok)throw"failed to load wasm binary file at '"+_+"'";return Q.arrayBuffer()}).catch(function(){return eJ(_)})}return Promise.resolve().then(function(){return eJ(_)})}function qZ(){var Q={a:lZ};function X(N,D){var z=N.exports;$.asm=z,jJ=$.asm.E,oJ(jJ.buffer),iJ=$.asm.N,$Z($.asm.F),YZ("wasm-instantiate")}KZ("wasm-instantiate");function Y(N){X(N.instance)}function V(N){return VZ().then(function(D){return WebAssembly.instantiate(D,Q)}).then(function(D){return D}).then(N,function(D){t("failed to asynchronously prepare wasm: "+D),GJ(D)})}function j(){if(!JJ&&typeof WebAssembly.instantiateStreaming==="function"&&!rJ(_)&&typeof fetch==="function")return fetch(_,{credentials:"same-origin"}).then(function(N){var D=WebAssembly.instantiateStreaming(N,Q);return D.then(Y,function(z){return t("wasm streaming compile failed: "+z),t("falling back to ArrayBuffer instantiation"),V(Y)})});else return V(Y)}if($.instantiateWasm)try{var U=$.instantiateWasm(Q,X);return U}catch(N){return t("Module.instantiateWasm callback failed with error: "+N),!1}return j().catch(b),{}}function SJ(Q){while(Q.length>0){var X=Q.shift();if(typeof X=="function"){X($);continue}var Y=X.func;if(typeof Y==="number")if(X.arg===void 0)S(Y)();else S(Y)(X.arg);else Y(X.arg===void 0?null:X.arg)}}var LJ=[];function S(Q){var X=LJ[Q];if(!X){if(Q>=LJ.length)LJ.length=Q+1;LJ[Q]=X=iJ.get(Q)}return X}function ZJ(Q,X,Y,V,j){}function JQ(Q){switch(Q){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw TypeError("Unknown type size: "+Q)}}function OZ(){var Q=Array(256);for(var X=0;X<256;++X)Q[X]=String.fromCharCode(X);HQ=Q}var HQ=void 0;function g(Q){var X="",Y=Q;while(B[Y])X+=HQ[B[Y++]];return X}var WJ={},e={},$J={},DJ=48,fJ=57;function LQ(Q){if(Q===void 0)return"_unknown";Q=Q.replace(/[^a-zA-Z0-9_]/g,"$");var X=Q.charCodeAt(0);if(X>=DJ&&X<=fJ)return"_"+Q;else return Q}function WQ(Q,X){return Q=LQ(Q),Function("body","return function "+Q+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(X)}function TJ(Q,X){var Y=WQ(X,function(V){this.name=X,this.message=V;var j=Error(V).stack;if(j!==void 0)this.stack=this.toString()+`
`+j.replace(/^Error(:[^\n]*)?\n/,"")});return Y.prototype=Object.create(Q.prototype),Y.prototype.constructor=Y,Y.prototype.toString=function(){if(this.message===void 0)return this.name;else return this.name+": "+this.message},Y}var QQ=void 0;function c(Q){throw new QQ(Q)}var ZQ=void 0;function $Q(Q){throw new ZQ(Q)}function DQ(Q,X,Y){Q.forEach(function(D){$J[D]=X});function V(D){var z=Y(D);if(z.length!==Q.length)$Q("Mismatched type converter count");for(var C=0;C<Q.length;++C)XJ(Q[C],z[C])}var j=Array(X.length),U=[],N=0;if(X.forEach(function(D,z){if(e.hasOwnProperty(D))j[z]=e[D];else{if(U.push(D),!WJ.hasOwnProperty(D))WJ[D]=[];WJ[D].push(function(){if(j[z]=e[D],++N,N===U.length)V(j)})}}),U.length===0)V(j)}function XJ(Q,X,Y){if(Y=Y||{},!("argPackAdvance"in X))throw TypeError("registerType registeredInstance requires argPackAdvance");var V=X.name;if(!Q)c('type "'+V+'" must have a positive integer typeid pointer');if(e.hasOwnProperty(Q))if(Y.ignoreDuplicateRegistrations)return;else c("Cannot register type '"+V+"' twice");if(e[Q]=X,delete $J[Q],WJ.hasOwnProperty(Q)){var j=WJ[Q];delete WJ[Q],j.forEach(function(U){U()})}}function jZ(Q,X,Y,V,j){var U=JQ(Y);X=g(X),XJ(Q,{name:X,fromWireType:function(N){return!!N},toWireType:function(N,D){return D?V:j},argPackAdvance:8,readValueFromPointer:function(N){var D;if(Y===1)D=bJ;else if(Y===2)D=a;else if(Y===4)D=w;else throw TypeError("Unknown boolean type size: "+X);return this.fromWireType(D[N>>U])},destructorFunction:null})}var wJ=[],r=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function XQ(Q){if(Q>4&&--r[Q].refcount===0)r[Q]=void 0,wJ.push(Q)}function d(){var Q=0;for(var X=5;X<r.length;++X)if(r[X]!==void 0)++Q;return Q}function UQ(){for(var Q=5;Q<r.length;++Q)if(r[Q]!==void 0)return r[Q];return null}function o(){$.count_emval_handles=d,$.get_first_emval=UQ}var u={toValue:function(Q){if(!Q)c("Cannot use deleted val. handle = "+Q);return r[Q].value},toHandle:function(Q){switch(Q){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var X=wJ.length?wJ.pop():r.length;return r[X]={refcount:1,value:Q},X}}}};function KQ(Q){return this.fromWireType(h[Q>>2])}function YQ(Q,X){X=g(X),XJ(Q,{name:X,fromWireType:function(Y){var V=u.toValue(Y);return XQ(Y),V},toWireType:function(Y,V){return u.toHandle(V)},argPackAdvance:8,readValueFromPointer:KQ,destructorFunction:null})}function i(Q){if(Q===null)return"null";var X=typeof Q;if(X==="object"||X==="array"||X==="function")return Q.toString();else return""+Q}function NQ(Q,X){switch(X){case 2:return function(Y){return this.fromWireType(uJ[Y>>2])};case 3:return function(Y){return this.fromWireType(sJ[Y>>3])};default:throw TypeError("Unknown float type: "+Q)}}function HZ(Q,X,Y){var V=JQ(Y);X=g(X),XJ(Q,{name:X,fromWireType:function(j){return j},toWireType:function(j,U){if(typeof U!=="number"&&typeof U!=="boolean")throw TypeError('Cannot convert "'+i(U)+'" to '+this.name);return U},argPackAdvance:8,readValueFromPointer:NQ(X,V),destructorFunction:null})}function LZ(Q,X){if(!(Q instanceof Function))throw TypeError("new_ called with constructor type "+typeof Q+" which is not a function");var Y=WQ(Q.name||"unknownFunctionName",function(){});Y.prototype=Q.prototype;var V=new Y,j=Q.apply(V,X);return j instanceof Object?j:V}function WZ(Q){while(Q.length){var X=Q.pop(),Y=Q.pop();Y(X)}}function FJ(Q,X,Y,V,j){var U=X.length;if(U<2)c("argTypes array size mismatch! Must at least get return value and 'this' types!");var N=X[1]!==null&&Y!==null,D=!1;for(var z=1;z<X.length;++z)if(X[z]!==null&&X[z].destructorFunction===void 0){D=!0;break}var C=X[0].name!=="void",M="",f="";for(var z=0;z<U-2;++z)M+=(z!==0?", ":"")+"arg"+z,f+=(z!==0?", ":"")+"arg"+z+"Wired";var n="return function "+LQ(Q)+"("+M+`) {
if (arguments.length !== `+(U-2)+`) {
throwBindingError('function `+Q+" called with ' + arguments.length + ' arguments, expected "+(U-2)+` args!');
}
`;if(D)n+=`var destructors = [];
`;var zJ=D?"destructors":"null",VJ=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],MJ=[c,V,j,WZ,X[0],X[1]];if(N)n+="var thisWired = classParam.toWireType("+zJ+`, this);
`;for(var z=0;z<U-2;++z)n+="var arg"+z+"Wired = argType"+z+".toWireType("+zJ+", arg"+z+"); // "+X[z+2].name+`
`,VJ.push("argType"+z),MJ.push(X[z+2]);if(N)f="thisWired"+(f.length>0?", ":"")+f;if(n+=(C?"var rv = ":"")+"invoker(fn"+(f.length>0?", ":"")+f+`);
`,D)n+=`runDestructors(destructors);
`;else for(var z=N?1:2;z<X.length;++z){var AJ=z===1?"thisWired":"arg"+(z-2)+"Wired";if(X[z].destructorFunction!==null)n+=AJ+"_dtor("+AJ+"); // "+X[z].name+`
`,VJ.push(AJ+"_dtor"),MJ.push(X[z].destructorFunction)}if(C)n+=`var ret = retType.fromWireType(rv);
return ret;
`;n+=`}
`,VJ.push(n);var iZ=LZ(Function,VJ).apply(null,MJ);return iZ}function DZ(Q,X,Y){if(Q[X].overloadTable===void 0){var V=Q[X];Q[X]=function(){if(!Q[X].overloadTable.hasOwnProperty(arguments.length))c("Function '"+Y+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+Q[X].overloadTable+")!");return Q[X].overloadTable[arguments.length].apply(this,arguments)},Q[X].overloadTable=[],Q[X].overloadTable[V.argCount]=V}}function GQ(Q,X,Y){if($.hasOwnProperty(Q)){if(Y===void 0||$[Q].overloadTable!==void 0&&$[Q].overloadTable[Y]!==void 0)c("Cannot register public name '"+Q+"' twice");if(DZ($,Q,Q),$.hasOwnProperty(Y))c("Cannot register multiple overloads of a function with the same number of arguments ("+Y+")!");$[Q].overloadTable[Y]=X}else if($[Q]=X,Y!==void 0)$[Q].numArguments=Y}function UZ(Q,X){var Y=[];for(var V=0;V<Q;V++)Y.push(w[(X>>2)+V]);return Y}function NZ(Q,X,Y){if(!$.hasOwnProperty(Q))$Q("Replacing nonexistant public symbol");if($[Q].overloadTable!==void 0&&Y!==void 0)$[Q].overloadTable[Y]=X;else $[Q]=X,$[Q].argCount=Y}function zZ(Q,X,Y){var V=$["dynCall_"+Q];return Y&&Y.length?V.apply(null,[X].concat(Y)):V.call(null,X)}function EZ(Q,X,Y){if(Q.includes("j"))return zZ(Q,X,Y);return S(X).apply(null,Y)}function FZ(Q,X){var Y=[];return function(){Y.length=arguments.length;for(var V=0;V<arguments.length;V++)Y[V]=arguments[V];return EZ(Q,X,Y)}}function CZ(Q,X){Q=g(Q);function Y(){if(Q.includes("j"))return FZ(Q,X);return S(X)}var V=Y();if(typeof V!=="function")c("unknown function pointer with signature "+Q+": "+X);return V}var zQ=void 0;function EQ(Q){var X=BQ(Q),Y=g(X);return KJ(X),Y}function AZ(Q,X){var Y=[],V={};function j(U){if(V[U])return;if(e[U])return;if($J[U]){$J[U].forEach(j);return}Y.push(U),V[U]=!0}throw X.forEach(j),new zQ(Q+": "+Y.map(EQ).join([", "]))}function kZ(Q,X,Y,V,j,U){var N=UZ(X,Y);Q=g(Q),j=CZ(V,j),GQ(Q,function(){AZ("Cannot call "+Q+" due to unbound types",N)},X-1),DQ([],N,function(D){var z=[D[0],null].concat(D.slice(1));return NZ(Q,FJ(Q,z,null,j,U),X-1),[]})}function RZ(Q,X,Y){switch(X){case 0:return Y?function(j){return bJ[j]}:function(j){return B[j]};case 1:return Y?function(j){return a[j>>1]}:function(j){return HJ[j>>1]};case 2:return Y?function(j){return w[j>>2]}:function(j){return h[j>>2]};default:throw TypeError("Unknown integer type: "+Q)}}function _J(Q,X,Y,V,j){if(X=g(X),j===-1)j=4294967295;var U=JQ(Y),N=function(C){return C};if(V===0){var D=32-8*Y;N=function(C){return C<<D>>>D}}var z=X.includes("unsigned");XJ(Q,{name:X,fromWireType:N,toWireType:function(C,M){if(typeof M!=="number"&&typeof M!=="boolean")throw TypeError('Cannot convert "'+i(M)+'" to '+this.name);if(M<V||M>j)throw TypeError('Passing a number "'+i(M)+'" from JS side to C/C++ side to an argument of type "'+X+'", which is outside the valid range ['+V+", "+j+"]!");return z?M>>>0:M|0},argPackAdvance:8,readValueFromPointer:RZ(X,U,V!==0),destructorFunction:null})}function FQ(Q,X,Y){var V=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],j=V[X];function U(N){N=N>>2;var D=h,z=D[N],C=D[N+1];return new j(BJ,C,z)}Y=g(Y),XJ(Q,{name:Y,fromWireType:U,argPackAdvance:8,readValueFromPointer:U},{ignoreDuplicateRegistrations:!0})}function CQ(Q,X){X=g(X);var Y=X==="std::string";XJ(Q,{name:X,fromWireType:function(V){var j=h[V>>2],U;if(Y){var N=V+4;for(var D=0;D<=j;++D){var z=V+4+D;if(D==j||B[z]==0){var C=z-N,M=dJ(N,C);if(U===void 0)U=M;else U+=String.fromCharCode(0),U+=M;N=z+1}}}else{var f=Array(j);for(var D=0;D<j;++D)f[D]=String.fromCharCode(B[V+4+D]);U=f.join("")}return KJ(V),U},toWireType:function(V,j){if(j instanceof ArrayBuffer)j=new Uint8Array(j);var U,N=typeof j==="string";if(!(N||j instanceof Uint8Array||j instanceof Uint8ClampedArray||j instanceof Int8Array))c("Cannot pass non-string to std::string");if(Y&&N)U=function(){return lQ(j)};else U=function(){return j.length};var D=U(),z=VQ(4+D+1);if(h[z>>2]=D,Y&&N)mQ(j,z+4,D+1);else if(N)for(var C=0;C<D;++C){var M=j.charCodeAt(C);if(M>255)KJ(z),c("String has UTF-16 code units that do not fit in 8 bits");B[z+4+C]=M}else for(var C=0;C<D;++C)B[z+4+C]=j[C];if(V!==null)V.push(KJ,z);return z},argPackAdvance:8,readValueFromPointer:KQ,destructorFunction:function(V){KJ(V)}})}function IZ(Q,X,Y){Y=g(Y);var V,j,U,N,D;if(X===2)V=uQ,j=sQ,N=oQ,U=function(){return HJ},D=1;else if(X===4)V=iQ,j=nQ,N=tQ,U=function(){return h},D=2;XJ(Q,{name:Y,fromWireType:function(z){var C=h[z>>2],M=U(),f,n=z+4;for(var zJ=0;zJ<=C;++zJ){var VJ=z+4+zJ*X;if(zJ==C||M[VJ>>D]==0){var MJ=VJ-n,AJ=V(n,MJ);if(f===void 0)f=AJ;else f+=String.fromCharCode(0),f+=AJ;n=VJ+X}}return KJ(z),f},toWireType:function(z,C){if(typeof C!=="string")c("Cannot pass non-string to C++ string type "+Y);var M=N(C),f=VQ(4+M+X);if(h[f>>2]=M>>D,j(C,f+4,M+X),z!==null)z.push(KJ,f);return f},argPackAdvance:8,readValueFromPointer:KQ,destructorFunction:function(z){KJ(z)}})}function BZ(Q,X){X=g(X),XJ(Q,{isVoid:!0,name:X,argPackAdvance:0,fromWireType:function(){return},toWireType:function(Y,V){return}})}function bZ(){throw"longjmp"}var PZ={};function SZ(Q){var X=PZ[Q];if(X===void 0)return g(Q);else return X}function AQ(){if(typeof globalThis==="object")return globalThis;return function(){return Function}()("return this")()}function wZ(Q){if(Q===0)return u.toHandle(AQ());else return Q=SZ(Q),u.toHandle(AQ()[Q])}function _Z(Q){if(Q>4)r[Q].refcount+=1}function MZ(Q,X){var Y=e[Q];if(Y===void 0)c(X+" has unknown type "+EQ(Q));return Y}function xZ(Q){var X="";for(var Y=0;Y<Q;++Y)X+=(Y!==0?", ":"")+"arg"+Y;var V="return function emval_allocator_"+Q+`(constructor, argTypes, args) {
`;for(var Y=0;Y<Q;++Y)V+="var argType"+Y+" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + "+Y+'], "parameter '+Y+`");
var arg`+Y+" = argType"+Y+`.readValueFromPointer(args);
args += argType`+Y+`['argPackAdvance'];
`;return V+="var obj = new constructor("+X+`);
return valueToHandle(obj);
}
`,Function("requireRegisteredType","Module","valueToHandle",V)(MZ,$,u.toHandle)}var kQ={};function fZ(Q,X,Y,V){Q=u.toValue(Q);var j=kQ[X];if(!j)j=xZ(X),kQ[X]=j;return j(Q,Y,V)}function TZ(){GJ("")}function RQ(Q,X,Y){B.copyWithin(Q,X,X+Y)}function vZ(Q){try{return jJ.grow(Q-BJ.byteLength+65535>>>16),oJ(jJ.buffer),1}catch(X){}}function hZ(Q){var X=B.length;Q=Q>>>0;var Y=2147483648;if(Q>Y)return!1;for(var V=1;V<=4;V*=2){var j=X*(1+0.2/V);j=Math.min(j,Q+100663296);var U=Math.min(Y,aQ(Math.max(Q,j),65536)),N=vZ(U);if(N)return!0}return!1}var vJ={mappings:{},buffers:[null,[],[]],printChar:function(Q,X){var Y=vJ.buffers[Q];if(X===0||X===10)(Q===1?vQ:t)(cQ(Y,0)),Y.length=0;else Y.push(X)},varargs:void 0,get:function(){vJ.varargs+=4;var Q=w[vJ.varargs-4>>2];return Q},getStr:function(Q){var X=dJ(Q);return X},get64:function(Q,X){return Q}};function yZ(Q){return 0}function IQ(Q,X,Y,V,j){}function gZ(Q,X,Y,V){var j=0;for(var U=0;U<Y;U++){var N=w[X>>2],D=w[X+4>>2];X+=8;for(var z=0;z<D;z++)vJ.printChar(Q,B[N+z]);j+=D}return w[V>>2]=j,0}function cZ(){return yQ()}function pZ(Q){hQ(Q)}function mZ(){t("missing function: setjmp"),GJ(-1)}OZ(),QQ=$.BindingError=TJ(Error,"BindingError"),ZQ=$.InternalError=TJ(Error,"InternalError"),o(),zQ=$.UnboundTypeError=TJ(Error,"UnboundTypeError");var lZ={u:ZJ,p:jZ,D:YQ,o:HZ,s:kZ,e:_J,d:FQ,k:CQ,j:IZ,q:BZ,z:bZ,g:XQ,h:wZ,l:_Z,n:fZ,a:TZ,A:RQ,i:hZ,C:yZ,t:IQ,B:gZ,b:cZ,f:m,v:l,w:p,x:bQ,m:oZ,y:YJ,c:pZ,r:mZ},rZ=qZ(),dZ=$.___wasm_call_ctors=function(){return(dZ=$.___wasm_call_ctors=$.asm.F).apply(null,arguments)},VQ=$._malloc=function(){return(VQ=$._malloc=$.asm.G).apply(null,arguments)},KJ=$._free=function(){return(KJ=$._free=$.asm.H).apply(null,arguments)},BQ=$.___getTypeName=function(){return(BQ=$.___getTypeName=$.asm.I).apply(null,arguments)},uZ=$.___embind_register_native_and_builtin_types=function(){return(uZ=$.___embind_register_native_and_builtin_types=$.asm.J).apply(null,arguments)},UJ=$.stackSave=function(){return(UJ=$.stackSave=$.asm.K).apply(null,arguments)},NJ=$.stackRestore=function(){return(NJ=$.stackRestore=$.asm.L).apply(null,arguments)},CJ=$._setThrew=function(){return(CJ=$._setThrew=$.asm.M).apply(null,arguments)},sZ=$.dynCall_iiijii=function(){return(sZ=$.dynCall_iiijii=$.asm.O).apply(null,arguments)},qQ=$.dynCall_jiji=function(){return(qQ=$.dynCall_jiji=$.asm.P).apply(null,arguments)};function YJ(Q,X,Y,V,j,U,N,D){var z=UJ();try{S(Q)(X,Y,V,j,U,N,D)}catch(C){if(NJ(z),C!==C+0&&C!=="longjmp")throw C;CJ(1,0)}}function bQ(Q,X){var Y=UJ();try{S(Q)(X)}catch(V){if(NJ(Y),V!==V+0&&V!=="longjmp")throw V;CJ(1,0)}}function oZ(Q,X,Y,V,j){var U=UJ();try{S(Q)(X,Y,V,j)}catch(N){if(NJ(U),N!==N+0&&N!=="longjmp")throw N;CJ(1,0)}}function p(Q){var X=UJ();try{S(Q)()}catch(Y){if(NJ(X),Y!==Y+0&&Y!=="longjmp")throw Y;CJ(1,0)}}function m(Q,X,Y){var V=UJ();try{return S(Q)(X,Y)}catch(j){if(NJ(V),j!==j+0&&j!=="longjmp")throw j;CJ(1,0)}}function l(Q,X,Y,V,j){var U=UJ();try{return S(Q)(X,Y,V,j)}catch(N){if(NJ(U),N!==N+0&&N!=="longjmp")throw N;CJ(1,0)}}var hJ;QJ=function Q(){if(!hJ)yJ();if(!hJ)QJ=Q};function yJ(Q){if(Q=Q||RJ,s>0)return;if(eQ(),s>0)return;function X(){if(hJ)return;if(hJ=!0,$.calledRun=!0,mJ)return;if(JZ(),k($),$.onRuntimeInitialized)$.onRuntimeInitialized();QZ()}if($.setStatus)$.setStatus("Running..."),setTimeout(function(){setTimeout(function(){$.setStatus("")},1),X()},1);else X()}if($.run=yJ,$.preInit){if(typeof $.preInit=="function")$.preInit=[$.preInit];while($.preInit.length>0)$.preInit.pop()()}return yJ(),$.ready}}(),Q0=j0;var gJ=null,SQ=null,wQ=null,_Q=null;async function W0(){if(gJ)return gJ;if(wQ)return wQ;return wQ=(async()=>{try{if(typeof self>"u")global.self=global;if(typeof self<"u"&&!self.location)self.location={href:"file:///home/bnowak/repos/squoosh-kit/packages/avif/src/avif.worker.ts"};if(typeof SharedArrayBuffer>"u"&&typeof window>"u")globalThis.SharedArrayBuffer=ArrayBuffer;let R=async(I,$)=>{try{let k=await aZ($);if(typeof console<"u"&&console.log)console.log(`[AVIF] Loaded WASM binary from ${$} (${(k.byteLength/1024).toFixed(1)}KB)`);return I({noInitialRun:!0,wasmBinary:k})}catch(k){if(typeof console<"u"&&console.warn)console.warn("[AVIF] Failed to load WASM binary explicitly, trying module initialization without it:",k);return I({noInitialRun:!0})}};try{let I=await import("./chunk-1qj2q5mf.js");if(typeof console<"u"&&console.log)console.log("[AVIF] Multi-threaded encoder available, loading...");return gJ=await R(I.default,new URL("../wasm/avif/avif_enc_mt.wasm","file:///home/bnowak/repos/squoosh-kit/packages/avif/src/avif.worker.ts").toString()),gJ}catch(I){if(typeof console<"u"&&console.log)console.log("[AVIF] Multi-threaded encoder not available, falling back to standard encoder",I)}return gJ=await R(J0,new URL("../wasm/avif/avif_enc.wasm","file:///home/bnowak/repos/squoosh-kit/packages/avif/src/avif.worker.ts").toString()),gJ}catch(R){throw console.error("[AVIF] Failed to load encode module:",R),R}})(),wQ}async function D0(){if(SQ)return SQ;if(_Q)return _Q;return _Q=(async()=>{try{if(typeof self>"u")global.self=global;if(typeof self<"u"&&!self.location)self.location={href:"file:///home/bnowak/repos/squoosh-kit/packages/avif/src/avif.worker.ts"};if(typeof SharedArrayBuffer>"u"&&typeof window>"u")globalThis.SharedArrayBuffer=ArrayBuffer;return SQ=await(async(I,$)=>{try{let k=await aZ($);if(typeof console<"u"&&console.log)console.log(`[AVIF] Loaded decoder WASM binary from ${$} (${(k.byteLength/1024).toFixed(1)}KB)`);return I({noInitialRun:!0,wasmBinary:k})}catch(k){if(typeof console<"u"&&console.warn)console.warn("[AVIF] Failed to load decoder WASM binary explicitly:",k);return I({noInitialRun:!0})}})(Q0,new URL("../wasm/avif-dec/avif_dec.wasm","file:///home/bnowak/repos/squoosh-kit/packages/avif/src/avif.worker.ts").toString()),SQ}catch(R){throw console.error("[AVIF] Failed to load decode module:",R),R}})(),_Q}async function X0(R,I,$){if(Z0(R),$0(I),$?.aborted)throw new DOMException("Encoding was aborted","AbortError");let k=await W0(),{data:b,width:x,height:T}=R,RJ=b instanceof Uint8ClampedArray?new Uint8Array(b.buffer,b.byteOffset,b.length):new Uint8Array(b.buffer,b.byteOffset,b.length);if($?.aborted)throw new DOMException("Encoding was aborted","AbortError");let cJ={...{quality:50,qualityAlpha:50,denoiseLevel:0,tileRowsLog2:0,tileColsLog2:0,speed:6,subsample:1,chromaDeltaQ:!1,sharpness:0,enableSharpYUV:!1,tune:0},...I},EJ=k.encode(RJ,x,T,cJ);if(!EJ)throw Error("AVIF encoding failed");return EJ}async function K0(R,I){if(I?.aborted)throw new DOMException("Decoding was aborted","AbortError");let $=await D0(),k=ArrayBuffer.isView(R)?new Uint8Array(R.buffer,R.byteOffset,R.byteLength):new Uint8Array(R);if(I?.aborted)throw new DOMException("Decoding was aborted","AbortError");let b=$.decode(k);if(!b)throw Error("AVIF decoding failed");return b}if(typeof self<"u")self.onmessage=async(R)=>{let I=R.data;if(I?.type==="worker:ping"){self.postMessage({type:"worker:ready"});return}if(I.type==="avif:encode"){let $=I,k={id:$.id,ok:!1};try{let{image:b,options:x}=$.payload,T=await X0(b,x);k.ok=!0,k.data=T,self.postMessage(k)}catch(b){k.error=b instanceof Error?b.message:"Unknown error",self.postMessage(k)}}else if(I.type==="avif:decode"){let $=I,k={id:$.id,ok:!1};try{let{buffer:b}=$.payload,x=await K0(b);k.ok=!0,k.data=x,self.postMessage(k)}catch(b){k.error=b instanceof Error?b.message:"Unknown error",self.postMessage(k)}}else self.postMessage({id:I.id,ok:!1,error:`Unknown message type: ${I.type}`})};

//# debugId=2A5A3E573F88B5A164756E2164756E21
